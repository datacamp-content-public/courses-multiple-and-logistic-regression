---
title: Insert title here
key: e2eaa8253f6beb165d878ed1a596c863

---
## Fitting a line to a binary response

```yaml
type: "TitleSlide"
key: "d8fd5a3b62"
```

`@lower_third`

name: Joseph Ambrose Pagaran
title: Chief R&D, Ambrosio Bing Computing


`@script`
When analysing a continuous response variable such as a person’s weight or annual income, we would normally use a simple linear regression model to explore possible relationships with other explanatory variables. But what if the response variable is binary or categorical. In this screencast, we go ahead in the usual manner of fitting a line to a binary response variable, see what could go wrong, and recommend some rules of thumb.


---
## Wolf spider data

```yaml
type: "TwoColumns"
key: "e3bfe3bd7a"
center_content: false
```

`@part1`
![](https://assets.datacamp.com/production/repositories/4182/datasets/7084f59bdd9d59b724d77d2f8b37e5aa22916ffa/dc-ws.jpg)

Reference:
Suzuki, S., et al., (2006). Acta Arachnologica 55: 79-86.
Source: http://www.utsc.utoronto.ca/~butler/d29/spiders.txt


`@part2`
![](https://assets.datacamp.com/production/repositories/4182/datasets/539dc253d83f89d115b2ffcbec258cbeec91d5c0/dc-ws-map.jpg)


`@script`
For our own puposes, we will use the Wolf spider data that a team of Japanese researchers in 2006 had investigated what would cause wolf spider to be found on a beach. The picture on the left shows the wolf spider coming out of its own burrows, below the picture is a summary text describing the wolf spider behavior and a declaration of being an endangered species and of having high risk of extinction. The picture on the right depicts a map showing the distribution of beaches in Japan, and a table of the average sand grain size (in millimetres), and observed the presence or absence of this particular spider on each beach as recorded by the japanese researchers in 28 different beaches.


---
## Summer Escapade ...

```yaml
type: "FullSlide"
key: "ada6df5dd2"
center_content: true
disable_transition: true
```

`@part1`
Imagine travelling to Japan one summer

![](https://assets.datacamp.com/production/repositories/4182/datasets/bb7a6eeb74d0f2886ca96db002980ae4cccd9980/dc-beach.jpg)


`@script`
The wolf spider data will be useful for us in creating a linear model to help you make decisions if one day during one summer you decided to travel to Japan but have no particular idea what to do either to visit the sandy beaches to go for swimming and sunbathing or just for nature conservation.


---
## Either you are the kind of person who love, or

```yaml
type: "TwoColumns"
key: "1fdfb0df9f"
center_content: true
```

`@part1`
... Japanese beaches, 
but are afraid of Wolf spiders that inhabit near the surface! 

![](https://assets.datacamp.com/production/repositories/4182/datasets/92ed1f3b921b656bbad1ae37831dbfa7528669a0/dc-Parley_spidey__frighty_2286-.jpg)


`@part2`
... love nature and want to save Wolf spiders from going extinct.

![](https://assets.datacamp.com/production/repositories/4182/datasets/45c9cc0bb75558ac84447691f6fba774121a09f6/dc-One-Step-to-Save-the-Nature-.jpg)


`@script`
In either case the linear model will be useful for you if you are the kind of person that either love japanese beaches but are just afraid of Wolf spiders, or you love nature and you want to save wolf spiders from going extinct.


---
## A glimpse of the Wolf spider data

```yaml
type: "FullSlide"
key: "1fc4b224b3"
```

`@part1`
```python
import pandas
import seaborn as sns
df = pandas.read_csv('grainsize.csv',sep=';')
ax = sns.boxplot(y='Grain size (mm)', x='Spiders', data=df)
```
![](https://assets.datacamp.com/production/repositories/4182/datasets/da00eeb9085298ac3ef01daa49cda8c778e4b13d/dc-ws-boxplot.png)


`@script`
Using the package and seaborn packages we can have a quick glimpse of the Wolf spider data.  The boxplot created using the seaborn package tells the story that spiders seems to be present when the sand grain size tends to be larger. So we would expect to ﬁnd some kind of useful relationship in the logistic regression. Note that we have reversed the cause and eﬀect here: in the boxplot we are asking “given that the spider is present or absent, how big are the grains of sand?” a question that might be relevnt for nature conservationist like you, whereas the logistic regression is asking “given the size of the grains of sand, how likely is the spider to be present?”  a question important for someone that has fear of spiders.


---
## Linear and Logistic Regression plots

```yaml
type: "FullImageSlide"
key: "ad50ba4631"
center_content: true
```

`@part1`
![](https://assets.datacamp.com/production/repositories/4182/datasets/b9204b0517c46419f0c18f32c8dc6c749fd75a07/dc-linreg-logitreg-plots-01-.jpg)


`@script`
After having converted all entries into numeric type, we can continue to the use the seaborn package to find the best fit line on the left panel using ordinary-least squares in linear regression and on the right using maximum likelihood in logistic regression framework.


---
## Best-fit Model parameters

```yaml
type: "TwoColumns"
key: "0a93665cac"
center_content: true
```

`@part1`
Ordinary-least squares (OLS)
```
import statsmodels.formula.api as smf
#we can use R style formulas:
linreg = smf.ols('y ~ X',data=df).fit()
linreg.summary()
```
![](https://assets.datacamp.com/production/repositories/4182/datasets/488915129b6c61863ee21dce3ff74d866df1c8f1/dc-ols.jpg)


`@part2`
Maximum-likelihood estimation (MLE)
```


logreg=smf.logit('y ~ X',data=df).fit()
logreg.summary()
```
![](https://assets.datacamp.com/production/repositories/4182/datasets/9ce0b0022246f03dc0b0b0d9f55567a60c3e6e6d/dc-mle.jpg)


`@script`
As seaborn is only a visualization package, we have to use a separate statsmodel package to retrieve the best-fit model parameters, the slope and intercept


---
## What went wrong?

```yaml
type: "FullImageSlide"
key: "bfd05e3ec8"
center_content: true
```

`@part1`
![](https://assets.datacamp.com/production/repositories/4182/datasets/a693206f2548af7d807d497047df26db16ecea91/dc-linreg-logitreg-plots-03-.jpg)


`@script`
To put all results in one slide, the best-fit derived equations (top panel), their best-fit plots (middle panel), and predicted values (bottom panels)


---
## What went wrong?

```yaml
type: "FullImageSlide"
key: "a12d69b44a"
center_content: true
disable_transition: true
```

`@part1`
![](https://assets.datacamp.com/production/repositories/4182/datasets/91b99197f2ce6d7a4853b572925f4a65d505bfaf/dc-linreg-logitreg-plots-04-.jpg)


`@script`
we can immediately perform a visual check from the predicted values as well as from the portions of the plot. As highlighted in red rectangle, we obtain non-sense values of probabilities, that is, values of probabilities that are greater than 1, these are obtained after having used linear regression to model a categorical output variable, which is in this case, a binary one; and not a continuous variable. Probabilities can only have values between 0 and 1.


---
## What would be the fix?

```yaml
type: "FullImageSlide"
key: "82d3eefb15"
center_content: true
disable_transition: false
```

`@part1`
![](https://assets.datacamp.com/production/repositories/4182/datasets/3f56ad0d55db1f15d50aadd707a02181486e600e/dc-linreg-logitreg-plots-06-.jpg)


`@script`
So as a rule of thumb whether to pursue the usual linear regression or use the special case on logistic regression in handling categorical variables, either binary, depends on the values of probabilities. If they are extremely close to 0 or 1, then go for logistic regression. Otherwise, when they lie between 0.20 and 0.80, then linear and logistic models would work equally well, though the linear model is preferred over logistic as being easy to interpret among the two.


---
## Let's practice with NASA's Space Shuttle Challenger data!

```yaml
type: "FinalSlide"
key: "2b73ad4264"
```

`@script`


